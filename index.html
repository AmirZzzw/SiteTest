<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <!-- متا تگ‌ها و لینک‌ها -->
</head>
<body>
    <!-- صفحه لودینگ -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-logo">
            <i class="fas fa-store"></i>
        </div>
        <div class="loading-text">فروشگاه خدمات دیجیتال SidkaShop<br>در حال راه‌اندازی...</div>
        <div class="loading-spinner"></div>
    </div>

    <!-- هدر سایت -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo">
                    <i class="fas fa-store"></i>
                    <span>SidkaShop</span>
                </a>
                
                <ul class="nav-links">
                    <li><a href="#home" class="active"><i class="fas fa-home"></i> خانه</a></li>
                    <li><a href="#products"><i class="fas fa-box"></i> محصولات</a></li>
                    <li><a href="#pricing"><i class="fas fa-tag"></i> لیست قیمت</a></li>
                    
                    <!-- پشتیبانی -->
                    <li class="support-ticket-link">
                        <a href="#ticket" id="ticket-btn">
                            <i class="fas fa-comment-dots"></i> پشتیبانی
                        </a>
                    </li>
                    
                    <!-- سبد خرید -->
                    <li class="cart-icon">
                        <a href="#cart" id="cart-toggle">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </a>
                    </li>
                    
                    <!-- بخش کاربر -->
                    <li class="user-section">
                        <a href="#login" id="login-btn"><i class="fas fa-user"></i> ورود</a>
                        <div class="user-dropdown" id="user-dropdown">
                            <a href="#profile" id="profile-btn"><i class="fas fa-user-circle"></i> پروفایل</a>
                            <a href="#orders" id="orders-btn"><i class="fas fa-history"></i> سابقه خرید</a>
                            <a href="#mytickets" id="mytickets-btn"><i class="fas fa-ticket-alt"></i> تیکت‌های من</a>
                            <a href="#logout" id="logout-btn"><i class="fas fa-sign-out-alt"></i> خروج</a>
                        </div>
                    </li>
                    
                    <!-- ادمین -->
                    <li class="admin-link" id="admin-nav-item" style="display: none;">
                        <a href="#admin" id="admin-btn"><i class="fas fa-cogs"></i> پنل ادمین</a>
                    </li>
                </ul>
                
                <button class="menu-toggle" id="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- صفحه اصلی -->
    <main>
        <!-- بخش معرفی -->
        <section class="hero" id="home">
            <div class="container">
                <div class="hero-content">
                    <h1>فروشگاه خدمات دیجیتال</h1>
                    <p class="subtitle">ارائه با کیفیت‌ترین خدمات دیجیتال با قیمت مناسب</p>
                    <p>خرید پنل، اشتراک VPN، طراحی تامنیل و خدمات مرتبط با امنیت کامل و پشتیبانی 24 ساعته</p>
                    <div class="hero-buttons">
                        <a href="#products" class="btn btn-primary">مشاهده محصولات</a>
                        <a href="#pricing" class="btn btn-secondary">لیست قیمت</a>
                        <a href="#ticket" class="btn btn-telegram" id="open-ticket-main">
                            <i class="fas fa-comment-medical"></i> پشتیبانی
                        </a>
                    </div>
                </div>
                <div class="hero-image">
                    <i class="fas fa-laptop-code"></i>
                </div>
            </div>
        </section>

        <!-- بخش محصولات -->
        <section class="products" id="products">
            <div class="container">
                <h2 class="section-title">محصولات و خدمات</h2>
                <p class="section-subtitle">خدمات دیجیتال با کیفیت بالا و قیمت مناسب</p>
                
                <div class="product-filters">
                    <button class="filter-btn active" data-filter="all">همه</button>
                    <button class="filter-btn" data-filter="panels">پنل‌ها</button>
                    <button class="filter-btn" data-filter="subscriptions">اشتراک‌ها</button>
                    <button class="filter-btn" data-filter="design">خدمات طراحی</button>
                </div>
                
                <div class="products-grid" id="products-grid">
                    <!-- محصولات از طریق JavaScript اضافه می‌شوند -->
                    <div class="loading-products">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>در حال بارگذاری محصولات...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- بخش لیست قیمت -->
        <section class="pricing" id="pricing">
            <div class="container">
                <h2 class="section-title">لیست قیمت خدمات</h2>
                <p class="section-subtitle">قیمت‌های شفاف و بدون واسطه</p>
                
                <div class="pricing-table">
                    <table>
                        <thead>
                            <tr>
                                <th>نام خدمت</th>
                                <th>توضیحات</th>
                                <th>قیمت (تومان)</th>
                                <th>عملیات</th>
                            </tr>
                        </thead>
                        <tbody id="pricing-table-body">
                            <!-- ردیف‌های جدول از طریق JavaScript اضافه می‌شوند -->
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 30px;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    در حال بارگذاری...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- اطلاعات پرداخت -->
                <div class="payment-info">
                    <h3><i class="fas fa-credit-card"></i> روش پرداخت</h3>
                    <div class="payment-card">
                        <div class="payment-details">
                            <p><strong>مبلغ را به شماره کارت زیر واریز کنید:</strong></p>
                            <div class="card-number">
                                <i class="fas fa-credit-card"></i>
                                <span id="card-number-text">6037 9982 2227 6759</span>
                                <button class="copy-btn" id="copy-card-btn">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <p><strong>به نام:</strong> امیرمحمد یوسفی</p>
                            <p class="note">پس از واریز، رسید را در صفحه پرداخت آپلود کنید.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- بخش تماس -->
        <section class="contact" id="contact">
            <div class="container">
                <h2 class="section-title">تماس با ما</h2>
                <p class="section-subtitle">راه‌های ارتباطی با پشتیبانی</p>
                
                <div class="contact-content">
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fab fa-telegram"></i>
                            <h3>پشتیبانی تلگرام</h3>
                            <p>@SidkaSupport</p>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <h3>تماس تلفنی</h3>
                            <p id="admin-phone-text">09021707830</p>
                            <button class="btn btn-primary" id="copy-phone-btn">کپی شماره</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- فوتر -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <a href="#" class="logo">
                        <i class="fas fa-store"></i>
                        <span>SidkaShop</span>
                    </a>
                    <p>فروشگاه خدمات دیجیتال با امنیت و کیفیت بالا</p>
                </div>
                
                <div class="footer-copyright">
                    <p>تمامی حقوق برای فروشگاه خدمات دیجیتال محفوظ است © ۱۴۰۳</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========== MODALS ========== -->
    <!-- مودال‌ها -->
    
    <script>
        // تابع بارگذاری اسکریپت
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    console.log(`✅ Loaded: ${src}`);
                    resolve();
                };
                script.onerror = () => {
                    console.error(`❌ Failed to load: ${src}`);
                    reject(new Error(`Failed to load ${src}`));
                };
                document.head.appendChild(script);
            });
        }
        
        // بارگذاری همه اسکریپت‌ها
        async function loadAllScripts() {
            try {
                // 1. بارگذاری Supabase
                await loadScript('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js');
                
                // 2. بارگذاری سرویس درست
                await loadScript('supabase-service-fixed.js');
                
                // 3. بارگذاری main.js
                await loadScript('main.js');
                
                // 4. بارگذاری fallback اگر نیاز بود
                if (!window.supabaseFunctions) {
                    await loadScript('fallback-data.js');
                }
                
            } catch (error) {
                console.error('❌ Error loading scripts:', error);
            }
        }
        
        // شروع بارگذاری
        loadAllScripts();
    </script>
</body>
</html>
